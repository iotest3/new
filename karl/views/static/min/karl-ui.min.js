/*
 * KARL karl-ui.min.js resources generated at 2014-10-10T14:55:04.132Z
*/
!function(t){t.widget("ui.grid",{options:{width:500,height:300,limit:!1,pagination:!0,allocateRows:!0,chunk:20,footer:!0,toolbar:!1,multipleSelection:!0},_generateToolbar:function(){this.toolbar=t('<tr class="ui-grid-toolbar"><td>Toolbar</td></tr>').appendTo(this.grid),this.toolbar=t("td",this.toolbar)},_generateColumns:function(){this.columnsContainer=t('<tr class="ui-grid-columns"><td><div class="ui-grid-columns-constrainer"><table cellpadding="0" cellspacing="0"><tbody><tr class="ui-grid-header ui-grid-inner"></tr></tbody></table></div></td></tr>').appendTo(this.grid).find("table tbody tr"),t(".ui-grid-columns-constrainer",this.grid).css({width:this.options.width,overflow:"hidden"}),this.columnsContainer.gridSortable({instance:this})},_generateFooter:function(){this.footer=t('<tr class="ui-grid-footer"><td><div class="ui-grid-footer-text ui-grid-limits"></div></td></tr>').appendTo(this.grid).find("td")},_generatePagination:function(e){this.pagination=t('<div class="ui-grid-footer-text" style="float: right;"></div>').appendTo(this.footer);Math.round(e.totalRecords/this.options.limit);this._updatePagination(e)},_updatePagination:function(e){var i=Math.round(e.totalRecords/this.options.limit),n=Math.round(this.offset/this.options.limit)+1,s=[];this.pagination.empty();for(var r=n-1;r>0&&r>n-3;r--)this.pagination.prepend('<a href="#" class="ui-grid-pagination">'+r+"</a>"),s.push(r);for(var r=n;i+1>r&&n+3>r;r++)this.pagination.append(r==n?'<span class="ui-grid-pagination-current">'+r+"</span>":'<a href="#" class="ui-grid-pagination">'+r+"</a>"),s.push(r);i>1&&-1==t.inArray(2,s)&&this.pagination.prepend('<span class="ui-grid-pagination-dots">...</span>'),-1==t.inArray(1,s)&&this.pagination.prepend('<a href="#" class="ui-grid-pagination">1</a>'),-1==t.inArray(i-1,s)&&this.pagination.append('<span class="ui-grid-pagination-dots">...</span>'),-1==t.inArray(i,s)&&this.pagination.append('<a href="#" class="ui-grid-pagination">'+i+"</a>"),this.pagination.prepend(n-1>0?'<a href="#" class="ui-grid-pagination">&lt;&lt;</a>':'<span class="ui-grid-pagination">&lt;&lt;</span>'),this.pagination.append(n+1>i?'<span class="ui-grid-pagination">&gt;&gt;</span>':'<a href="#" class="ui-grid-pagination">&gt;&gt;</a>')},_create:function(){var e=this;this.offset=0,this.sortColumn=this.options.sortColumn,this.sortDirection=this.options.sortDirection,this.grid=t('<table class="ui-grid ui-component ui-component-content" cellpadding="0" cellspacing="0" width="100%" height="100%"></table>').css({width:this.options.width}).appendTo(this.element),this.options.toolbar&&this._generateToolbar(),this._generateColumns(),this.content=t('<tr><td><div class="ui-grid-content"><table cellpadding="0" cellspacing="0"><tbody></tbody></table></div></td></tr>').appendTo(this.grid).find("tbody"),this.contentDiv=t(".ui-grid-content",this.grid),this.contentDiv.height(this.options.height),this.options.footer&&this._generateFooter(),this.gridmodel=t.ui.grid.model({url:this.options.url}),this._initialUpdate(),this.grid.bind("click.grid",function(t){return e._handleClick(t)}).bind("mousemove.grid",function(t){return e._handleMove(t)}).bind("mouseleave.grid",function(){t(e.tableRowHovered).removeClass("ui-grid-row-hover")}),this.contentDiv.bind("scroll.grid",function(){t("div.ui-grid-columns-constrainer",e.grid)[0].scrollLeft=this.scrollLeft}),this._makeRowsSelectable()},_initialUpdate:function(){this._update({columns:!0})},_handleMove:function(e){if(this.columnHandleHovered&&(t("td.ui-grid-column-header *",this.grid).css("cursor",""),this.columnHandleHovered=!1),t(e.target).is(".ui-grid-column-header")||t(e.target).parent().is(".ui-grid-column-header")){var i=t(e.target).is(".ui-grid-column-header")?t(e.target):t(e.target).parent(),n=t(i).data("gridResizable");if(!n||!n._mouseCapture(e))return;return t("td.ui-grid-column-header *",this.grid).css("cursor","e-resize"),void(this.columnHandleHovered=!0)}if(t(e.target).parents(".ui-grid-row").length){var i=t(e.target).parents(".ui-grid-row");return this.tableRowHovered&&this.tableRowHovered!=i[0]&&t(this.tableRowHovered).removeClass("ui-grid-row-hover"),i.addClass("ui-grid-row-hover"),void(this.tableRowHovered=i[0])}this.tableRowHovered&&t(this.tableRowHovered).removeClass("ui-grid-row-hover")},_handleClick:function(e){if(t(e.target.parentNode).is(".ui-grid-column-header")){var i=t.data(e.target.parentNode,"grid-column-header");this.sortDirection="desc"==this.sortDirection?"asc":"desc",this.sortColumn=i.id,this._update({columns:!1,refresh:!0})}if(t(e.target).is("a.ui-grid-pagination")){var n=e.target.innerHTML,s=Math.round(this.offset/this.options.limit)+1;"&gt;&gt;"==n&&(s+=1),"&lt;&lt;"==n&&(s-=1),isNaN(parseInt(e.target.innerHTML,10))||(s=parseInt(e.target.innerHTML,10)),this.offset=(s-1)*this.options.limit,this._update()}return!1},_makeRowsSelectable:function(){this.content.parent().parent().selectable({filter:"tr",multiple:this.options.multipleSelection,selectClass:"ui-grid-row-selected",focusClass:"ui-grid-row-focussed",select:function(e,i){var n=i.currentFocus.offset(),s=i.currentFocus.height(),r=t(this).offset(),a=t(this).height();n.top-r.top+s>a?this.scrollTop=n.top+this.scrollTop-r.top+s-a:n.top<r.top&&(this.scrollTop=n.top+this.scrollTop-r.top)}})},_update:function(e){var i=this,n=t.extend({},e,{limit:this.options.limit,start:!(e&&e.refresh)&&this.offset||0,refresh:e&&e.refresh||e&&e.columns}),s=t.extend({},n,{fill:null});n.refresh&&(s.start=i.infiniteScrolling?0:this.offset||0),this.sortColumn&&(s.sortColumn=this.sortColumn),this.sortDirection&&(s.sortDirection=this.sortDirection),this.gridmodel.fetch(s,function(e){if(i.options.pagination&&!i.pagination?i._generatePagination(e):i.options.pagination&&i.pagination&&i._updatePagination(e),(!i.infiniteScrolling||n.refresh)&&i.content.empty(),n.refresh&&(i.columnsContainer.empty(),i._addColumns(e.columns)),i.infiniteScrolling&&!n.refresh){for(var s=[],r=0;r<e.records.length;r++)s.push(i._addRow(e.records[r]));n.fill({chunk:n.chunk,data:s})}else{for(var r=0;r<e.records.length;r++)i._addRow(e.records[r]);i._syncColumnWidth(),i.infiniteScrolling&&i.contentDiv.infiniteScrolling("restart")}!i.infiniteScrolling&&!i.options.pagination&&i.options.limit<e.totalRecords&&(i.infiniteScrolling=!0,i.contentDiv.infiniteScrolling({total:i.options.allocateRows?e.totalRecords:!1,chunk:i.options.chunk,scroll:function(t,e){i.offset=e.start,i._update({fill:e.fill,chunk:e.chunk})},update:function(e,n){t("div.ui-grid-limits",i.footer).html("Result "+n.firstItem+"-"+n.lastItem+(n.total?" of "+n.total:""))}})),i.infiniteScrolling||t("div.ui-grid-limits",i.footer).html("Result "+n.start+"-"+(n.start+n.limit)+" of "+e.totalRecords)})},_syncColumnWidth:function(){for(var e=t("tr:first td",this.content),i=0,n=0;n<this.columns.length;n++)t(e[n]).width(t("td:eq("+n+")",this.columnsContainer)[0].style.width),i+=parseInt(t("td:eq("+n+")",this.columnsContainer)[0].style.width,10);this.content.parent().width(i)},_addColumns:function(e){this.columns=e;for(var i=25,n=0;n<e.length;n++){{t('<td class="ui-grid-column-header ui-state-default"><div>'+e[n].label+"</div></td>").width(e[n].width).data("grid-column-header",e[n]).appendTo(this.columnsContainer).gridResizable()}i+=e[n].width}t('<td class="ui-grid-column-header ui-state-default"><div></div></td>').width(25).appendTo(this.columnsContainer),this.columnsContainer.parent().parent().width(i)},_addRow:function(e,i){var n=t('<tr class="ui-grid-row"></tr>');i||n.appendTo(this.content);for(var s=0;s<this.columns.length;s++)t('<td class="ui-grid-column ui-state-active"><div>'+e[this.columns[s].id]+"</div></td>").appendTo(n);return n}}),t.widget("ui.gridResizable",t.extend({},t.ui.mouse,{options:{handle:!1,cancel:":input",delay:0,distance:1},_create:function(){this.table=this.element.parent().parent().parent(),this.gridTable=this.element.parents(".ui-grid").find("div.ui-grid-content > table"),this._mouseInit()},_mouseCapture:function(t){return this.offset=this.element.offset(),this.offset.left+this.element.width()-t.pageX<5?!0:!1},_mouseStart:function(e){t.extend(this,{startPosition:e.pageX,startWidth:this.element.width(),tableStartWidth:this.table.width(),gridTableStartWidth:this.gridTable.width(),index:this.element.parent().find("td").index(this.element[0])})},_mouseDrag:function(e){this.element.css("width",this.startWidth+(e.pageX-this.startPosition)),this.table.css("width",this.tableStartWidth+(e.pageX-this.startPosition)),t("tr:eq(0) td:eq("+this.index+")",this.gridTable).css("width",this.startWidth+(e.pageX-this.startPosition)),this.gridTable.css("width",this.gridTableStartWidth+(e.pageX-this.startPosition))},_mouseStop:function(){}})),t.widget("ui.gridSortable",t.extend({},t.ui.mouse,{options:{handle:!1,cancel:":input",delay:0,distance:1},_create:function(){this._mouseInit()},_mouseCapture:function(e){var i=t(e.target);return this.item=i.hasClass("ui-grid-column-header")?i:i.parents(".ui-grid-column-header"),this.offset=this.item.offset(),!0},_mouseStart:function(e){var i=this;this.offsets=[],this.items=this.element.find("td").each(function(){i.item[0]!=this&&i.offsets.push([this,t(this).offset().left])}),t.extend(this,{startPosition:e.pageX,index:this.items.index(this.item[0])})},_mouseDrag:function(e){var i=this;t(i.offsets).each(function(){if(t.ui.isOverAxis(e.pageX,this[1],this[0].offsetWidth)){var n=t.ui.isOverAxis(e.pageX,this[1],this[0].offsetWidth/2)?"left":"right";i.lastHovered&&i.lastHovered[0]==this[0]&&i.lastHovered[1]==n||(i.lastHovered&&t(i.lastHovered[0]).removeClass("ui-grid-column-sort-right ui-grid-column-sort-left"),i.lastHovered=[this[0],n],t(i.lastHovered[0]).addClass("ui-grid-column-sort-"+n))}})},_mouseStop:function(){var e=this;this.lastHovered&&(t(this.lastHovered[0]).removeClass("ui-grid-column-sort-right ui-grid-column-sort-left"),t(this.lastHovered[0])["right"==this.lastHovered[1]?"after":"before"](this.item),t("tr",this.options.instance.contentDiv).each(function(){t("> td:eq("+e.items.index(e.lastHovered[0])+")",this)["right"==e.lastHovered[1]?"after":"before"](t("> td:eq("+e.index+")",this))}))}}))}(jQuery),function(t){t.extend(t.ui.grid,{model:function(e){return e=t.extend({},t.ui.grid.model.defaults,e),{fetch:function(i,n){t.ajax(t.extend(!0,{url:e.url,data:i,success:function(t){n(e.parse(t))}},e.ajax))}}}}),t.ui.grid.model.defaults={ajax:{dataType:"json",cache:!1},parse:function(e){var i=[];return t.each(e.records,function(){var n=this,s={};t.each(e.columns,function(t){s[this.id]=n[t]}),i.push(s)}),{totalRecords:e.totalRecords,columns:e.columns,records:i}}}}(jQuery),function(t){t.makeTemplate=function(t,e,i){var n=e.replace(/([\]{}[\\])/g,"\\$1"),s=i.replace(/([\]{}[\\])/g,"\\$1"),r="try { with (_context) {var _result = '';"+t.replace(/[\t\r\n]/g," ").replace(/^(.*)$/,i+"$1"+e).replace(new RegExp(s+"(.*?)"+n,"g"),function(t){return t.replace(new RegExp("^"+s+"(.*)"+n+"$"),"$1").replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/^(.*)$/,i+"_result += '$1';"+e)}).replace(new RegExp(n+"=(.*?)"+s,"g"),"_result += ($1);").replace(new RegExp(n+"(.*?)"+s,"g")," $1 ").replace(new RegExp("^"+s+"(.*)"+n+"$"),"$1")+"return _result;} } catch(e) { return '' } ";return new Function("_context",r)}}(jQuery),function(t){t.ui=t.ui||{},t.ui.autobox=t.ui.autobox||{},t.ui.autobox.ext=t.ui.autobox.ext||{};var e;e=window.console?console.log:function(){};var n=function(e){this.chainedGetJSON=e.jsonhandler||t.getJSON,this.maxActive=e.maxActive||1,this.maxQueue=e.maxQueue||1,this.active=0,this.queue=[]};t.extend(n.prototype,{getJSON:function(t,e,i){var n=this,s=function(s){n.active-=1,n.log("MiniRM IN",t,e),i(s);var r=n.queue.shift();void 0!==r&&(n.active+=1,n.log("MiniRM POP/OUT",r[0],r[1]),n.chainedGetJSON.apply(null,r))};if(this.active<this.maxActive)this.active+=1,this.log("MiniRM OUT",t,e),this.chainedGetJSON(t,e,s);else{if(this.queue.length==this.maxQueue){var r=this.queue.shift();this.log("MiniRM POP/DISCARD",r[0],r[1])}this.queue.push([t,e,s]),this.log("MiniRM PUSH",t,e)}},log:function(){}});var s=new n({});t.ui.autobox.ext.ajax=function(e){var n=e.ajax;return{getList:function(e,r){function a(t,e){return e&&(!t||t.length<e)}var o=e.val(),u=this.options.minQueryLength,l=this.options.minQueryNotice,c=o.replace(/\s+/," ").split(" "),h=[],d=[];for(i=0,j=c.length;j>i;i++){var p=c[i];""!=p&&(a(p,u)?h.push(p):d.push(p))}o=d.join(" "),d.length>0?s.getJSON(n,"val="+o,function(i){r&&(h.length>0&&l&&i.unshift(l),i=t(i).filter(function(){return!r[this.text]}),e.trigger("updateList",[i]))}):h.length>0&&l&&e.trigger("updateList",[[l]])}}},t.ui.autobox.ext.templateText=function(e){var i=t.makeTemplate(e.templateText,"<%","%>");return{template:function(t){return i(t)}}}}(jQuery),function(t){t.fn.resizableTextbox=function(e,i){var n=t.extend({min:5,max:500,step:7},i),s=e.attr("offsetWidth");e.bind("keydown",function(){t(this).data("rt-value",this.value.length)}).bind("keyup",function(){var e=t(this),i=n.step*e.val().length;i<=n.min&&(i=s),e.val().length==e.data("rt-value")||i<=n.min||i>=n.max||e.width(i)})},t.ui=t.ui||{},t.ui.autobox=t.ui.autobox||{};var e=0,i={ESC:27,RETURN:13,TAB:9,BS:8,DEL:46,LEFT:37,RIGHT:39,UP:38,DOWN:40};t.widget("ui.autobox3",{options:{timeout:500,template:function(t){return"<li>"+this.options.insertText(t)+"</li>"},insertText:function(t){return t},match:function(t){return this.match(new RegExp(t))},wrapper:'<ul class="autobox-list"></ul>',resizable:{},selectHoverable:"> li",minQueryLength:0,minQueryNotice:null,maxSearchContainerWidth:400},_create:function(){var e=this,i=this.options;if(t.ui.autobox.ext)for(var n in t.ui.autobox.ext)i[n]&&(this.options=i=t.extend(i,t.ui.autobox.ext[n](i)),delete i[n]);e._setupWidget(),i.getList&&(this._getList=i.getList),i.getBoxFromSelection&&(this._getBoxFromSelection=i.getBoxFromSelection),i.getBoxOnEnter&&(this._getBoxOnEnter=i.getBoxOnEnter),this.active=null,this.hovered=null,this.off()},_bindInput:function(e){function n(t){var e=t.which||t.keyCode;u.activelist.is_active&&e==i.TAB&&t.preventDefault()}function s(e,i,n){t.data(i,"typingTimeout",window.setTimeout(function(){t(e.target||e.srcElement).trigger("autobox")},n))}function r(e){var i=t.data(e,"typingTimeout");i&&window.clearInterval(i)}var a=this.options,o=this,u=this;return e.keydown(function(t){n(t)}).keyup(function(t){var e=t.which||t.keyCode;u.activelist.is_active||e!=i.UP&&e!=i.DOWN?n(t):(r(this),s(t,this,0))}).keypress(function(e){var n=e.keyCode||e.which;if(r(this),t.data(document.body,"suppressKey")&&(t.data(document.body,"suppressKey",!1),n==i.TAB||n==i.UP||n==i.DOWN))return!1;if(u.activelist.is_active&&32>n&&n!=i.BS&&n!=i.DEL)return!1;if(n==i.RETURN){var l=o._getBoxOnEnter();l&&o._addBox(l),e.preventDefault()}else(n==i.BS||n==i.DEL||n>32)&&s(e,this,a.timeout)}).bind("paste",function(t){s(t,this,0)}).bind("autobox",function(){var e=t(this);e.one("updateList",function(t,e){o._updateList(e)}),o._getList(e,o._getCurrentValsHash(e))}).bind("keydown.autobox",function(e){if(!u.activelist.is_active)return!0;var n=e.which||e.keyCode;if(n==i.ESC)u.cancel();else if(n==i.RETURN)u.activate(),e.preventDefault();else{if(n!=i.UP&&n!=i.TAB&&n!=i.DOWN)return!0;var s=n==i.UP?-1:1,r=-1,a=u.activelist.hoverable.length;u.hovered&&(r=u.activelist.hoverable.index(u.hovered)),r+=s,r>=a?r=0:0>r&&(r=a-1),u._setActive(u.activelist.hoverable.eq(r))}t.data(document.body,"suppressKey",!0)}),e},_updateList:function(e){var i=this,n=this.options,s=this.input&&this.input.val()||"";if(e=t(e).filter(function(){return n.match.call(this,s)}).map(function(){var e=t(n.template.call(i,this))[0];return t.data(e,"originalObject",this),e}),this.off(),!e.length)return!1;var r=e.wrapAll(n.wrapper).parents(":last"),a=this.input.offset();this.container=r.css({top:a.top+this.input.outerHeight(),left:a.left}).appendTo("body");var o=Math.max(r.width(),this.input.width());o=Math.min(o,this.options.maxSearchContainerWidth),this.container.css({width:o}),this.activelist={is_active:!0,original:this.input.val(),list:e,hoverable:r.find(this.options.selectHoverable)},this.activelist.hoverable.hover(function(){i._setActive(this)},function(){i._unsetActive()}),r.bind("click.autobox",function(){i.activate(),t.data(document.body,"suppressKey",!1)})},_getCurrentValsHash:function(t){for(var e=t.parent().parent().find("li"),i={},n=0;n<e.length;++n){var s=e[n].innerHTML.match(/^[^<]+/);s&&(i[s]=!0)}return i},_createHolder:function(){var e=this._bindInput(t('<input type="text"></input>')),i=t('<ul class="autobox-hldr ui-helper-clearfix"></ul>').append(t('<li class="autobox-input"></li>').append(e));return t.fn.resizableTextbox(e,t.extend(this.options.resizable,{min:e.outerWidth(),max:i.width()})),i},_setupWidget:function(){var e=this,i=this.options,n=this.element;if(this.holder=this._createHolder(n).insertAfter(n),this.input=this.holder.find("input"),n.removeAttr("name"),n.hide(),i.prevals)for(var s in i.prevals)this._addBox(i.prevals[s],!0);this.input.attr("autocomplete","off"),t(document).bind("click.autobox",function(){e.cancel()})},_getList:function(e,i){var n=this.options.list;i&&(n=t(n).filter(function(){return!i[this.text]})),e.trigger("updateList",[n])},_addBox:function(i){var n=this,s=this.input,r=this.options.name,a=t('<input type="hidden"></input>');a.attr("name",r),a.val(i.tag);var o=t('<li class="bit-box"></li>').attr("id","bit-"+e++).text(i.tag);o.append(t('<a href="#" class="closebutton"></a>').bind("click",function(t){n._delBox(o),t.preventDefault()})).append(a),s.parent().before(o),s.val("")},addBox:function(t,e){return this._addBox({tag:t},e)},_getBoxOnEnter:function(){var t=this.input.val();return t?{tag:t}:void 0},_getBoxFromSelection:function(){return{tag:t.data(this.active[0],"originalObject").text}},_delBox:function(t){t.remove()},activate:function(){if(this.active&&this.active[0]&&t.data(this.active[0],"originalObject"))this._addBox(this._getBoxFromSelection());else{var e=this._getBoxOnEnter();e&&this._addBox(e)}this.active&&this.input.trigger("activate.autobox",[t.data(this.active[0],"originalObject")]),this.off()},off:function(){this.container&&(this.container.remove(),this.container=null),this.activelist={is_active:!1}},_setActive:function(e){this.activelist.is_active&&(this._unsetActive(),e=t(e),this.hovered=e,this.active=e.is("li")?e:e.parents("li").eq(0),this.hovered.addClass("hover"),this.active.addClass("active"),this.input.trigger("itemSelected.autobox",[t.data(this.active[0],"originalObject")]),this._handleActive())},_handleActive:function(){this.input.val(this.options.insertText(t.data(this.active[0],"originalObject")))},_unsetActive:function(){this.activelist.list.removeClass("active"),this.activelist.hoverable.removeClass("hover"),this.active=null,this.hovered=null},cancel:function(){this.input.trigger("cancel.autobox"),this.input.val(this.activelist.original),this.off()}})}(jQuery),function(t){t.widget("karl.multistatusbox",{options:{clsContainer:"ui-widget",clsItem:"ui-state-highlight ui-corner-all",hasCloseButton:!0},_create:function(){this.queue=[],this.element.addClass(this.options.clsContainer)},clear:function(e){if(void 0===e)this.element.empty(),this.queue=[];else{var i=[];t(this.queue).each(function(){this.queueCategory==e?this.item.remove():i.push(this)}),this.queue=i}},append:function(e,i,n){void 0===i&&(i=null);var s=t('<div class="karl-multistatusbox-item ui-helper-clearfix"></div>');void 0===n&&(n=this.options.clsItem),s.addClass(n),s.append(t('<div class="karl-multistatusbox-message"></div>').append(e)),this.options.hasCloseButton&&s.append(t('<a href="#" class="karl-multistatusbox-closebutton"><span class="ui-icon ui-icon-closethick">X</span></a>').hover(function(){t(this).addClass("ui-state-hover")},function(){t(this).removeClass("ui-state-hover")}).click(function(t){s.remove(),t.preventDefault()})),this.element.append(s),this.queue.push({item:s,queueCategory:i})},clearAndAppend:function(t,e,i){this.clear(e),this.append(t,e,i)}})}(jQuery),function(t){t.widget("karl.karlcaptionedimage",{options:{clsWrapper:"karl-captionedimage-wrapper"},_create:function(){this.wrapper=t("<div></div>"),this.proxy=t("<img>").appendTo(this.wrapper),this.wrapper.append("<br />"),this.caption=t("<span></span>").appendTo(this.wrapper);var e=this.element.attr("alt"),i=this.element.attr("width");this.proxy.attr("alt",e).attr("width",i).attr("height",this.element.attr("height")).attr("src",this.element.attr("src")).addClass("karl-captionedimage-image"),this.wrapper[0].style.cssText=this.element[0].style.cssText,this.wrapper.attr("class",this.element.attr("class")).removeClass("tiny-imagedrawer-captioned").addClass(this.options.clsWrapper).width(i);var n=this.element.attr("align");"left"==n?this.wrapper.css("float","left"):"right"==n&&this.wrapper.css("float","right"),this.caption.text(e).addClass("karl-captionedimage-caption"),this.centerer=t("<div></div>").css("text-align","center").append(this.wrapper),this.element.after(this.centerer),this.element.hide().appendTo(this.centerer)},_destroy:function(){this.centerer.replaceWith(this.element),this.element.show(),t.Widget.prototype.destroy.call(this)}})}(jQuery),function(t){var e=t.ui.slider;t.widget("karl.karlslider",t.extend({},e.prototype,{options:t.extend({},e.prototype.options,{enableClickJump:!1,jumpStep:void 0,enableKeyJump:!1}),_create:function(){var t=this.options;t.jumpStep?(t.alignStep=t.step,t.step=t.enableKeyJump?t.jumpStep:t.step):(t.jumpStep=t.step,t.alignStep=t.step),e.prototype._create.call(this)},destroy:function(){e.prototype.destroy.call(this)},_mouseCapture:function(e){var i,n,s,r,a,o,u,l,c,h=this.options;if(h.disabled)return!1;if(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,a=this,this.handles.each(function(e){var i=Math.abs(n-a.values(e));s>i&&(s=i,r=t(this),o=e)}),h.range===!0&&this.values(1)===h.min&&(o+=1,r=t(this.handles[o])),u=this._start(e,o),u===!1)return!1;if(this._mouseSliding=!0,a._handleIndex=o,r.addClass("ui-state-active").focus(),l=r.offset(),c=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:e.pageX-l.left-r.width()/2,top:e.pageY-l.top-r.height()/2-(parseInt(r.css("borderTopWidth"),10)||0)-(parseInt(r.css("borderBottomWidth"),10)||0)+(parseInt(r.css("marginTop"),10)||0)},n=this._normValueFromMouse(i),this.options.enableClickJump){var d=this.values(o),p=n-d;if(0==p)return!0;var f=h.jumpStep,m=f%h.alignStep;m>0&&(f=f-m+h.alignStep);var g;return g=0>p?d-f:d+f,this._slide(e,o,g),this._mouseStop(e),this._animateOff=!0,!1}return this._slide(e,o,n),this._animateOff=!0,!0},_slide:function(t,i,n){n=Math.max(n,this._valueMin()),n=Math.min(n,this._valueMax()),e.prototype._slide.call(this,t,i,n)},_trimAlignValue:function(t){if(t<this._valueMin())return this._valueMin();if(t>this._valueMax())return this._valueMax();var e=this.options.alignStep>0?this.options.alignStep:1,i=t%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},_setOption:function(t,i){"jump"==t?(this.options.alignStep=i,this.options.enableKeyJump||(this.options.step=i)):"jumpStep"==t?(this.options.jumpStep=i,this.options.enableKeyJump&&(this.options.step=i)):e.prototype._setOption.apply(this,arguments)}}))}(jQuery),function(t){t.widget("karl.karlbuttonset",{options:{clsContainer:null},_create:function(){var e=this;this.selectionType=this.element.is("select")?this.element.attr("multiple")?"M":"S":"",this.compact=this.element.is(".compact")||this.element.is(".karl-buttonset-compact"),this.iconsOnly=this.element.is(".icons-only")||this.element.is(".karl-buttonset-icons-only");var i="fg-buttonset ui-helper-clearfix ",n="fg-button ui-state-default";this.compact?i+=" fg-buttonset-single":n+=" ui-corner-all",this.options.clsContainer&&(i+=" "+this.options.clsContainer),this.element.wrap("<div></div>"),this.wrapper=this.element.parent(),this.wrapper.data(this.widgetName,this),this.originalWasHidden=this.element.hasClass("ui-helper-hidden"),this.element.addClass("ui-helper-hidden"),this.wrapper.addClass(i),this.buttons=[],this.element.children().each(function(i){var s=t(this),r=s.text(),a=s.attr("title")||r,o=s.attr("class"),u=s.attr("selected"),l=s.attr("disabled"),c="";o&&(c='<span class="ui-icon '+o+'"/>');var h=n;l?h+=" ui-state-disabled":u&&(h+=" ui-state-active"),e.iconsOnly?h+=" fg-button-icon-solo":o&&(h+=" fg-button-icon-right");var d=t('<span class="'+h+'"><a     title="'+a+'" href="#">'+c+r+"</a></span>");d.appendTo(e.wrapper).click(function(t){d.hasClass("ui-state-disabled")||e._click(i),t.preventDefault()}).hover(function(){d.hasClass("ui-state-disabled")||d.addClass("ui-state-hover")},function(){d.removeClass("ui-state-hover")}),e.buttons.push(d[0])}),this.buttons=t(this.buttons),this.compact&&(this.buttons.eq(0).addClass("ui-corner-left"),this.buttons.eq(this.buttons.length-1).addClass("ui-corner-right"))},destroy:function(){this.wrapper.parent().length&&(this.wrapper.removeData(this.widgetName,this),this.element.removeData(this.widgetName,this),this.originalWasHidden||this.element.removeClass("ui-helper-hidden"),this.element.insertAfter(this.wrapper),this.wrapper.remove()),t.Widget.prototype.destroy.call(this)},getButton:function(t){return this.buttons.eq(t)},_click:function(e){var i=this;if("M"==this.selectionType){var n=this.buttons.eq(e);n.toggleClass("ui-state-active"),i._change(e,n.hasClass("ui-state-active"))}else if("S"==this.selectionType){this.buttons.each(function(n){if(n!=e){var s=t(this);s.hasClass("ui-state-active")&&(s.removeClass("ui-state-active"),i._change(n,!1))}});var s=this.buttons.eq(e);s.hasClass("ui-state-active")||(s.addClass("ui-state-active"),i._change(e,!0))}else i._change(e,!0)},_change:function(t,e){""!=this.selectionType&&this.element.children().eq(t).attr("selected",e),this.element.trigger("change.karlbuttonset",[t,e])}})}(jQuery),function(t){function e(t){return"object"==typeof t?t:{top:t,left:t}}var i=t.scrollTo=function(e,i,n){t(window).scrollTo(e,i,n)};i.defaults={axis:"y",duration:1},i.window=function(){return t(window).scrollable()},t.fn.scrollable=function(){return this.map(function(){var e=this.parentWindow||this.defaultView,i="#document"==this.nodeName?e.frameElement||e:this,n=i.contentDocument||(i.contentWindow||i).document,s=i.setInterval;return"IFRAME"==i.nodeName||s&&t.browser.safari?n.body:s?n.documentElement:this})},t.fn.scrollTo=function(n,s,r){return"object"==typeof s&&(r=s,s=0),"function"==typeof r&&(r={onAfter:r}),r=t.extend({},i.defaults,r),s=s||r.speed||r.duration,r.queue=r.queue&&r.axis.length>1,r.queue&&(s/=2),r.offset=e(r.offset),r.over=e(r.over),this.scrollable().each(function(){function i(t){l.animate(h,s,r.easing,t&&function(){t.call(this,n,r)})}function a(t){var e="scroll"+t,i=u.ownerDocument;return d?Math.max(i.documentElement[e],i.body[e]):u[e]}var o,u=this,l=t(u),c=n,h={},d=l.is("html,body");switch(typeof c){case"number":case"string":if(/^([+-]=)?\d+(px)?$/.test(c)){c=e(c);break}c=t(c,this);case"object":(c.is||c.style)&&(o=(c=t(c)).offset())}t.each(r.axis.split(""),function(t,e){var n="x"==e?"Left":"Top",s=n.toLowerCase(),p="scroll"+n,f=u[p],m="x"==e?"Width":"Height",g=m.toLowerCase();o?(h[p]=o[s]+(d?0:f-l.offset()[s]),r.margin&&(h[p]-=parseInt(c.css("margin"+n))||0,h[p]-=parseInt(c.css("border"+n+"Width"))||0),h[p]+=r.offset[s]||0,r.over[s]&&(h[p]+=c[g]()*r.over[s])):h[p]=c[s],/^\d+$/.test(h[p])&&(h[p]=h[p]<=0?0:Math.min(h[p],a(m))),!t&&r.queue&&(f!=h[p]&&i(r.onAfterFirst),delete h[p])}),i(r.onAfter)}).end()}}(jQuery),function(t){function e(e,n){function s(e,i){return t(a).bind(e,function(t,e){i&&i.call(this,e?e.position:void 0)===!1&&e&&(e.proceed=!1)}),a}function r(){var t=e.position().top-o.outerHeight(),i=o.outerHeight()+e.outerHeight(),s=n.position[0];"center"==s&&(t+=i/2),"bottom"==s&&(t+=i);var r=e.outerWidth()+o.outerWidth(),a=e.position().left+e.outerWidth();return s=n.position[1],"center"==s&&(a-=r/2),"left"==s&&(a-=r),t+=n.offset[0],a+=n.offset[1],{top:t,left:a}}var a=this;e.data("tooltip",a);var o=e.next();n.tip&&(o=t(n.tip),o.length>1&&(o=e.nextAll(n.tip).eq(0),o.length||(o=e.parent().nextAll(n.tip).eq(0)))),t.each(n,function(e,i){t.isFunction(i)&&s(e,i)});var u=e.is(":input"),l=u&&e.is(":checkbox, :radio, select, :button"),c=e.attr("type"),h=n.events[c]||n.events[u?l?"widget":"input":"def"];h=h.split(/,\s*/),e.bind(h[0],function(t){var e=o.data("trigger");e&&e[0]!=this&&o.hide(),t.target=this,a.show(t),o.hover(a.show,function(){a.hide()})}),e.bind(h[1],function(){a.hide()}),t.browser.msie||u||e.mousemove(function(){a.isShown()||e.triggerHandler("mouseover")}),n.opacity<1&&o.css("opacity",n.opacity);var d=0,p=e.attr("title");p&&n.cancelDefault&&(e.removeAttr("title"),e.data("title",p)),t.extend(a,{show:function(s){function u(){o.data("trigger",e);var s=r();n.tip&&p&&o.html(p);var u={proceed:!0,position:s};return t(a).trigger("onBeforeShow",u),u.proceed===!1?a:(s=r(),o.css({position:"absolute",top:s.top,left:s.left}),void i[n.effect][0].call(a,function(){t(a).trigger("onShow")}))}return s&&(e=t(s.target)),clearTimeout(o.data("timer")),o.is(":animated")||o.is(":visible")?a:(n.predelay?(clearTimeout(d),d=setTimeout(u,n.predelay)):u(),a)},hide:function(){function e(){var e={proceed:!0};t(a).trigger("onBeforeHide",e),e.proceed!==!1&&i[n.effect][1].call(a,function(){t(a).trigger("onHide")})}return clearTimeout(o.data("timer")),clearTimeout(d),o.is(":visible")?(n.delay?o.data("timer",setTimeout(e,n.delay)):e(),a):void 0},isShown:function(){return o.is(":visible, :animated")},getConf:function(){return n},getTip:function(){return o},getTrigger:function(){return e},onBeforeShow:function(t){return s("onBeforeShow",t)},onShow:function(t){return s("onShow",t)},onBeforeHide:function(t){return s("onBeforeHide",t)},onHide:function(t){return s("onHide",t)}})}t.tools=t.tools||{},t.tools.tooltip={version:"1.1.0",conf:{effect:"slide",direction:"up",bounce:!1,slideOffset:10,slideInSpeed:200,slideOutSpeed:200,slideFade:!t.browser.msie,fadeOutSpeed:"fast",tip:null,predelay:0,delay:30,opacity:1,lazy:void 0,position:["top","center"],cancelDefault:!0,offset:[0,0],api:!1,events:{def:"mouseover,mouseout",input:"focus,blur",widget:"focus mouseover,blur mouseout"}},addEffect:function(t,e,n){i[t]=[e,n]}};var i={toggle:[function(t){var e=this.getConf();this.getTip().css({opacity:e.opacity}).show(),t.call()},function(t){this.getTip().hide(),t.call()}],fade:[function(t){this.getTip().fadeIn(this.getConf().fadeInSpeed,t)},function(t){this.getTip().fadeOut(this.getConf().fadeOutSpeed,t)}]},n={up:["-","top"],down:["+","top"],left:["-","left"],right:["+","left"]};t.tools.tooltip.addEffect("slide",function(t){var e=this.getConf(),i=this.getTip(),s=e.slideFade?{opacity:e.opacity}:{},r=n[e.direction]||n.up;s[r[1]]=r[0]+"="+e.slideOffset,e.slideFade&&i.css({opacity:0}),i.show().animate(s,e.slideInSpeed,t)},function(e){var i=this.getConf(),s=i.slideOffset,r=i.slideFade?{opacity:0}:{},a=n[i.direction]||n.up,o=""+a[0];i.bounce&&(o="+"==o?"-":"+"),r[a[1]]=o+"="+s,this.getTip().animate(r,i.slideOutSpeed,function(){t(this).hide(),e.call()})}),t.prototype.tooltip=function(i){var n=this.eq("number"==typeof i?i:0).data("tooltip");if(n)return n;var s=t.extend(!0,{},t.tools.tooltip.conf);return t.isFunction(i)?i={onBeforeShow:i}:"string"==typeof i&&(i={tip:i}),t.extend(!0,s,i),"string"==typeof s.position&&(s.position=s.position.split(/,?\s/)),s.lazy!==!1&&(s.lazy===!0||this.length>20)?this.one("mouseover",function(){n=new e(t(this),s),n.show()}):this.each(function(){n=new e(t(this),s)}),s.api?n:this}}(jQuery),jQuery.cookie=function(t,e,i){if(arguments.length>1&&(null===e||"object"!=typeof e)){if(i=jQuery.extend({},i),null===e&&(i.expires=-1),"number"==typeof i.expires){var n=i.expires,s=i.expires=new Date;s.setDate(s.getDate()+n)}return document.cookie=[encodeURIComponent(t),"=",i.raw?String(e):encodeURIComponent(String(e)),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")
}i=e||{};var r,a=i.raw?function(t){return t}:decodeURIComponent;return(r=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?a(r[1]):null},function(t){var e={},i={};t.manageAjax=function(){function i(i,n){return e[i]=new t.manageAjax._manager(i,n),e[i]}function n(t){e[t]&&(e[t].clear(!0),delete e[t])}var s={create:i,destroy:n};return s}(),t.manageAjax._manager=function(e,i){this.requests={},this.inProgress=0,this.name=e,this.qName=e,this.opts=t.extend({},t.ajaxSettings,t.manageAjax.defaults,i),i&&i.queue&&i.queue!==!0&&"string"==typeof i.queue&&"clear"!==i.queue&&(this.qName=i.queue)},t.manageAjax._manager.prototype={add:function(e){e=t.extend({},this.opts,e);var i=e.complete||t.noop,n=e.success||t.noop,s=e.beforeSend||t.noop,r=e.error||t.noop,a="string"==typeof e.data?e.data:t.param(e.data||{}),o=e.type+e.url+a,u=this,l=this._createAjax(o,e,n,i);if(!this.requests[o]||!e.preventDoubbleRequests)return l.xhrID=o,e.xhrID=o,e.beforeSend=function(t,e){var i=s.call(this,t,e);return i===!1&&u._removeXHR(o),t=null,i},e.complete=function(t,n){u._complete.call(u,this,i,t,n,o,e),t=null},e.success=function(t,i,s){u._success.call(u,this,n,t,i,s,e),s=null},e.error=function(t,i,n){var s="",o="";"timeout"!==i&&t&&(s=t.status,o=t.responseXML||t.responseText),r?r.call(this,t,i,n,e):setTimeout(function(){throw i+"| status: "+s+" | URL: "+e.url+" | data: "+a+" | thrown: "+n+" | response: "+o},0),t=null},"clear"===e.queue&&t(document).clearQueue(this.qName),e.queue?(t.queue(document,this.qName,l),this.inProgress<e.maxRequests&&t.dequeue(document,this.qName),o):l()},_createAjax:function(e,n,s,r){var a=this;return function(){return n.beforeCreate.call(n.context||a,e,n)!==!1?(a.inProgress++,1===a.inProgress&&t.event.trigger(a.name+"AjaxStart"),n.cacheResponse&&i[e]?(a.requests[e]={},setTimeout(function(){a._complete.call(a,n.context||n,r,i[e],"success",e,n),a._success.call(a,n.context||n,s,i[e]._successData,"success",i[e],n)},0)):n.async?a.requests[e]=t.ajax(n):t.ajax(n),e):void 0}},_removeXHR:function(e){this.opts.queue&&t.dequeue(document,this.qName),this.inProgress--,this.requests[e]=null,delete this.requests[e]},_isAbort:function(t,e){var i=!(!e.abortIsNoSuccess||t&&0!==t.readyState&&this.lastAbort!==e.xhrID);return t=null,i},_complete:function(e,i,n,s,r,a){this._isAbort(n,a)&&(s="abort",a.abort.call(e,n,s,a)),i.call(e,n,s,a),t.event.trigger(this.name+"AjaxComplete",[n,s,a]),a.domCompleteTrigger&&t(a.domCompleteTrigger).trigger(this.name+"DOMComplete",[n,s,a]).trigger("DOMComplete",[n,s,a]),this._removeXHR(r),this.inProgress||t.event.trigger(this.name+"AjaxStop"),n=null},_success:function(e,n,s,r,a,o){var u=this;if(this._isAbort(a,o))return void(a=null);if(o.abortOld&&t.each(this.requests,function(t){return t===o.xhrID?!1:void u.abort(t)}),o.cacheResponse&&!i[o.xhrID]&&(i[o.xhrID]={status:a.status,statusText:a.statusText,responseText:a.responseText,responseXML:a.responseXML,_successData:s},"getAllResponseHeaders"in a)){var l,c=a.getAllResponseHeaders(),h=function(){l||(l={},t.each(c.split("\n"),function(t,e){var i=e.indexOf(":");l[e.substr(0,i)]=e.substr(i+2)}))};t.extend(i[o.xhrID],{getAllResponseHeaders:function(){return c},getResponseHeader:function(t){return h(),t in l?l[t]:null}})}n.call(e,s,r,a,o),t.event.trigger(this.name+"AjaxSuccess",[a,o,s]),o.domSuccessTrigger&&t(o.domSuccessTrigger).trigger(this.name+"DOMSuccess",[s,o]).trigger("DOMSuccess",[s,o]),a=null},getData:function(e){if(e){var i=this.requests[e];return!i&&this.opts.queue&&(i=t.grep(t(document).queue(this.qName),function(t){return t.xhrID===e})[0]),i}return{requests:this.requests,queue:this.opts.queue?t(document).queue(this.qName):[],inProgress:this.inProgress}},abort:function(e){var i;if(e)return i=this.getData(e),i&&i.abort?(this.lastAbort=e,i.abort(),this.lastAbort=!1):t(document).queue(this.qName,t.grep(t(document).queue(this.qName),function(t){return t!==i})),void(i=null);var n=this,s=[];t.each(this.requests,function(t){s.push(t)}),t.each(s,function(t,e){n.abort(e)})},clear:function(e){t(document).clearQueue(this.qName),e&&this.abort()}},t.manageAjax._manager.prototype.getXHR=t.manageAjax._manager.prototype.getData,t.manageAjax.defaults={beforeCreate:t.noop,abort:t.noop,abortIsNoSuccess:!0,maxRequests:1,cacheResponse:!1,domCompleteTrigger:!1,domSuccessTrigger:!1,preventDoubbleRequests:!0,queue:!1},t.each(t.manageAjax._manager.prototype,function(i,n){0!==i.indexOf("_")&&t.isFunction(n)&&(t.manageAjax[i]=function(n,s){if(!e[n]){if("add"!==i)return;t.manageAjax.create(n,s)}var r=Array.prototype.slice.call(arguments,1);e[n][i].apply(e[n],r)})})}(jQuery),function(t,e,i,n){t.fn.caret=function(s,r){var a,o,u=this[0],l=t.browser.msie;if("object"==typeof s&&"number"==typeof s.start&&"number"==typeof s.end?(a=s.start,o=s.end):"number"==typeof s&&"number"==typeof r?(a=s,o=r):"string"==typeof s?(a=u.value.indexOf(s))>-1?o=a+s[e]:a=null:"[object RegExp]"===Object.prototype.toString.call(s)&&(s=s.exec(u.value),null!=s&&(a=s.index,o=a+s[0][e])),"undefined"!=typeof a)return l?(l=this[0].createTextRange(),l.collapse(!0),l.moveStart("character",a),l.moveEnd("character",o-a),l.select()):(this[0].selectionStart=a,this[0].selectionEnd=o),this[0].focus(),this;if(l)if(o=document.selection,"textarea"!=this[0].tagName.toLowerCase()){l=this.val(),a=o[i]()[n](),a.moveEnd("character",l[e]);var c=""==a.text?l[e]:l.lastIndexOf(a.text);a=o[i]()[n](),a.moveStart("character",-l[e]);var h=a.text[e]}else a=o[i](),o=a[n](),o.moveToElementText(this[0]),o.setEndPoint("EndToEnd",a),c=o.text[e]-a.text[e],h=c+a.text[e];else c=u.selectionStart,h=u.selectionEnd;return a=u.value.substring(c,h),{start:c,end:h,text:a,replace:function(t){return u.value.substring(0,c)+t+u.value.substring(h,u.value[e])}}}}(jQuery,"length","createRange","duplicate"),function(t){function e(){var e=i(this);return isNaN(e.datetime)||t(this).text(n(e.datetime)),this}function i(e){if(e=t(e),!e.data("timeago")){e.data("timeago",{datetime:r.datetime(e)});var i=t.trim(e.text());i.length>0&&e.attr("title",i)}return e.data("timeago")}function n(t){return r.inWords(s(t))}function s(t){return(new Date).getTime()-t.getTime()}t.timeago=function(e){return n(e instanceof Date?e:"string"==typeof e?t.timeago.parse(e):t.timeago.datetime(e))};var r=t.timeago;t.extend(t.timeago,{settings:{refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},inWords:function(e){function i(i,s){var r=t.isFunction(i)?i(s,e):i,a=n.numbers&&n.numbers[s]||s;return r.replace(/%d/i,a)}var n=this.settings.strings,s=n.prefixAgo,r=n.suffixAgo;this.settings.allowFuture&&(0>e&&(s=n.prefixFromNow,r=n.suffixFromNow),e=Math.abs(e));var a=e/1e3,o=a/60,u=o/60,l=u/24,c=l/365,h=45>a&&i(n.seconds,Math.round(a))||90>a&&i(n.minute,1)||45>o&&i(n.minutes,Math.round(o))||90>o&&i(n.hour,1)||24>u&&i(n.hours,Math.round(u))||48>u&&i(n.day,1)||30>l&&i(n.days,Math.floor(l))||60>l&&i(n.month,1)||365>l&&i(n.months,Math.floor(l/30))||2>c&&i(n.year,1)||i(n.years,Math.floor(c));return t.trim([s,h,r].join(" "))},parse:function(e){var i=t.trim(e);return i=i.replace(/\.\d\d\d+/,""),i=i.replace(/-/,"/").replace(/-/,"/"),i=i.replace(/T/," ").replace(/Z/," UTC"),i=i.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(i)},datetime:function(e){var i="time"===t(e).get(0).tagName.toLowerCase(),n=t(e).attr(i?"datetime":"title");return r.parse(n)}}),t.fn.timeago=function(){var t=this;t.each(e);var i=r.settings;return i.refreshMillis>0&&setInterval(function(){t.each(e)},i.refreshMillis),t},document.createElement("abbr"),document.createElement("time")}(jQuery),function(t){var e=function(){window.console&&console.log&&console.log(Array.prototype.slice.call(arguments))};t.widget("bottlecap.livesearch",{options:{urlFn:null,renderCompletions:null,queryTransformFn:null,validationFn:null,errorFn:null,ajaxErrorFn:null,selectedFn:null,cookieName:"bottlecap.livesearch.searchType"},_create:function(){var e=this.element,i=this.options;this.urlFn=i.urlFn,this.transformQuery=i.queryTransformFn||function(t){return t},this.validateFn=i.validationFn||function(){return!0},this.errorFn=i.errorFn||function(){},this.ajaxErrorFn=i.ajaxErrorFn?i.ajaxErrorFn:this._ajaxErrorFn,this.ajaxManager=t.manageAjax.create("livesearch",{queue:!0,cacheResponse:!0}),this.cookieName=i.cookieName,this.cookieValue=t.cookie(i.cookieName),this.selectList=e.prev("ul").first(),this.selectButton=this.selectList.prev("button").first(),this.searchButton=e.next("button").first(),this.selectButton.button({icons:{secondary:"ui-icon-triangle-1-s"}}),this.selectButtonText=this.selectButton.find(".ui-button-text"),this.selectList.menu({select:t.proxy(this.menuSelected,this),input:this.selectList}).hide(),this.selectButton.click(t.proxy(this.selectButtonClicked,this)),this.selectList.click(t.proxy(this.selectButtonClicked,this)),e.autocomplete({delay:300,minLength:0,source:t.proxy(this.queryData,this),search:t.proxy(this.validateAndHandleError,this),position:{my:"right top",at:"right bottom",of:this.searchButton,collision:"none"},select:t.proxy(this.completionSelected,this)}),this.autoCompleteWidget=e.data("autocomplete"),this.autoCompleteWidget.menu.element.addClass("bc-livesearch-autocomplete-results"),e.bind("paste",t.proxy(this.textPasted,this)),this._defaultRenderCompletions=this.autoCompleteWidget._renderMenu,"function"==typeof i.renderCompletions&&(this.autoCompleteWidget._renderMenu=i.renderCompletions),this.searchButton.click(t.proxy(this.searchButtonClicked,this)),e.bind("keydown.autocomplete",t.proxy(this.keyPressed,this));var n="all_content";this.cookieValue&&(n=this.cookieValue);for(var s=this.selectList.find("li"),r=t.makeArray(s),a=0;a<r.length;a++){var o=t(r[a]);if(this.get_option_name(o)===n){var u=!0;this.menuSelected(0,{item:o},u);break}}this.searchButton.button({text:!1,icons:{primary:"ui-icon-search"}}),e.addClass("bc-livesearch bc-livesearch-autocomplete"),this.selectList.addClass("bc-livesearch bc-livesearch-menu"),this.selectButton.addClass("bc-livesearch bc-livesearch-btn bc-livesearch-btn-select"),this.searchButton.addClass("bc-livesearch bc-livesearch-btn bc-livesearch-btn-search");var l=this.selectButton.outerHeight(),c=t("<span></span>");c.css("display","inline-block").css("margin","0").css("padding","0").css("border","0").css("height",l+"px").css("verticalAlign","top"),e.wrap(c).css("margin","0").css("padding","0 3px").css("height",""+(l-2)+"px").css("lineHeight",""+(l-2)+"px");var h=this.selectButton.css("marginTop");e.css("marginTop",h),t.browser.msie&&7==parseInt(t.browser.version)&&this.selectButton.css("marginTop","1px")},menuSelected:function(e,i,n){var s=i.item,r=s.text();this.selectButtonText.text(r),n||(this.cookieValue=this.get_option_name(s),t.cookie(this.cookieName,this.cookieValue,{path:"/"})),this.selected_item={item:s,text:r,name:this.get_option_name(s)},this._trigger("menu",0,this.selected_item);var a=this.element.val();a&&(this.autoCompleteWidget.search(),this.element.focus())},selectButtonClicked:function(){var e=this.selectList;return e.is(":visible")?(e.hide(),!1):(e.menu("deactivate").show().css({top:0,left:0}).position({my:"left top",at:"left bottom",of:this.selectButton}),t(document).one("click",function(){e.hide()}),!1)},completionSelected:function(t,e){var i=e.item;this._trigger("selectedFn",t,i)!==!1&&this.performSearch(i.label||"")},_findGlobPosition:function(t,e){var i=t.length,n=-1;for(n=e;i>n&&" "!==t.charAt(n);n++);return 0==n||" "===t.charAt(n-1)?-1:n},globQueryTransform:function(e){var i=this.element.caret().start,n=this._findGlobPosition(e,i);return-1!==n&&(e=e.substring(0,n)+"*"+e.substring(n),e=e.replace(/\s+/," ")),e=t.trim(e)},numCharsValidate:function(e,i){if(i=i||3,e.length<i)return!1;var n=this.element.caret().start,s=this._findGlobPosition(e,n);if(-1===s)return t.trim(e).length>=i;if(i>s)return!1;for(var r=0;i>r;r++)if(" "===e.charAt(s-1-r))return!1;return!0},validateAndHandleError:function(){var t=this.element.val();return this.validateFn(t)?(this.errorFn.call(this,null),!0):(this.autoCompleteWidget.close(),this.errorFn.call(this,t),!1)},errorDisplayer:function(){if(!this._errorDisplayer){var e=this;this._errorDisplayer=function(){var i=t("<span></span>").addClass("bc-livesearch-autocomplete-message"),n=e.element.outerWidth()+e.searchButton.outerWidth()-2,s=t('<div><span class="bc-livesearch-autocomplete-msgicon ui-icon ui-icon-info"></span></div>').append(i).addClass("bc-livesearch-autocomplete-notification ui-state-error ui-icon-notice").width(n).appendTo(".bc-header").position({my:"right top",at:"right bottom",of:t(".bc-header-toolbox")});return{hide:function(){s.hide()},show:function(t){t&&i.text(t),s.show()},replaceWith:function(t){i.replaceWith(t),i=t,s.show()}}}()}return this._errorDisplayer},displayError:function(e){var i=this.errorDisplayer();if(null===e)i.hide();else{var n=this.element.caret().start,s=e,r=this._findGlobPosition(s,n);if(-1===r)0===t.trim(s).length?i.hide():i.show("not enough characters entered");else{for(var a=3,o=0,u=0;a>u;u++)if(" "===s.charAt(r-1-u)){o=r-u;break}var l=s.substring(o,r);i.show('Please add more characters to: "'+l+'"')}}},_ajaxErrorFn:function(t,i){e("bc.livesearch",i)},queryData:function(e,i){var n=this.transformQuery(e.term),s=this.urlFn.call(this,n),r=this;t.manageAjax.add("livesearch",{url:s,dataType:"json",maxRequests:1,queue:"clear",abortOld:!0,success:function(t){r.selectList.hide(),i(t),t&&t.length||r._trigger("noresults",0,{query:n,url:s,el:r})},error:function(){i(),r.ajaxErrorFn.apply(r,arguments)}})},searchButtonClicked:function(){var t=this.transformQuery(this.element.val());return this.performSearch(t),!1},textPasted:function(){setTimeout(t.proxy(function(){this.autoCompleteWidget.search()},this),0)},keyPressed:function(e){if(!e.isDefaultPrevented()&&(e.keyCode===t.ui.keyCode.ENTER||e.keyCode===t.ui.keyCode.NUMPAD_ENTER)){this.autoCompleteWidget.close();var i=this.transformQuery(this.element.val());return this.performSearch(i),!1}return!0},performSearch:function(t){this._trigger("search",0,{query:t,item:this.selected_item})},_setOption:function(t,e){"urlFn"===t?this.urlFn=e:"renderCompletions"===t&&("function"==typeof e?this.autoCompleteWidget._renderMenu=e:"default"===e&&(this.autoCompleteWidget._renderMenu=this._defaultRenderCompletions))},get_option_name:function(t){var e=t.attr("name");return"undefined"==typeof e&&(e=t.text()),e}})}(jQuery),function(t,e){var i,n,s,r,a,o,u,l,c,h,d,p,f,m,g,v,b,y,x,M,_,w,C,k;i=function(t){return new i.prototype.init(t)},"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=i:t.Globalize=i,i.cultures={},i.prototype={constructor:i,init:function(t){return this.cultures=i.cultures,this.cultureSelector=t,this}},i.prototype.init.prototype=i.prototype,i.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},i.cultures["default"].calendar=i.cultures["default"].calendars.standard,i.cultures.en=i.cultures["default"],i.cultureSelector="en",n=/^0x[a-f0-9]+$/i,s=/^[+-]?infinity$/i,r=/^[+-]?\d*\.?\d*(e[+-]?\d+)?$/,a=/^\s+|\s+$/g,o=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0,n=t.length;n>i;i++)if(t[i]===e)return i;return-1},u=function(t,e){return t.substr(t.length-e.length)===e},l=function(t){var i,n,s,r,a,o,u=arguments[0]||{},p=1,f=arguments.length,t=!1;for("boolean"==typeof u&&(t=u,u=arguments[1]||{},p=2),"object"==typeof u||h(u)||(u={});f>p;p++)if(null!=(i=arguments[p]))for(n in i)s=u[n],r=i[n],u!==r&&(t&&r&&(d(r)||(a=c(r)))?(a?(a=!1,o=s&&c(s)?s:[]):o=s&&d(s)?s:{},u[n]=l(t,o,r)):r!==e&&(u[n]=r));return u},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},h=function(t){return"[object Function]"===Object.prototype.toString.call(t)},d=function(t){return"[object Object]"===Object.prototype.toString.call(t)},p=function(t,e){return 0===t.indexOf(e)},f=function(t){return(t+"").replace(a,"")},m=function(t){return isNaN(t)?0/0:Math[0>t?"ceil":"floor"](t)},g=function(t,e,i){var n;for(n=t.length;e>n;n+=1)t=i?"0"+t:t+"0";return t},v=function(t,e){for(var i=0,n=!1,s=0,r=t.length;r>s;s++){var a=t.charAt(s);switch(a){case"'":n?e.push("'"):i++,n=!1;break;case"\\":n&&e.push("\\"),n=!n;break;default:e.push(a),n=!1}}return i},b=function(t,e){e=e||"F";var i,n=t.patterns,s=e.length;if(1===s){if(i=n[e],!i)throw"Invalid date format string '"+e+"'.";e=i}else 2===s&&"%"===e.charAt(0)&&(e=e.charAt(1));return e},y=function(t,e,i){function n(t,e){var i,n=t+"";return e>1&&n.length<e?(i=x[e-2]+n,i.substr(i.length-e,e)):i=n}function s(){return f||m?f:(f=C.test(e),m=!0,f)}function r(t,e){if(g)return g[e];switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate()}}var a=i.calendar,o=a.convert;if(!e||!e.length||"i"===e){var u;if(i&&i.name.length)if(o)u=y(t,a.patterns.F,i);else{var l=new Date(t.getTime()),c=_(t,a.eras);l.setFullYear(w(t,a,c)),u=l.toLocaleString()}else u=t.toString();return u}var h=a.eras,d="s"===e;e=b(a,e),u=[];var p,f,m,g,x=["0","00","000"],C=/([^d]|^)(d|dd)([^d]|$)/g,k=0,S=M();for(!d&&o&&(g=o.fromGregorian(t));;){var T=S.lastIndex,A=S.exec(e),D=e.slice(T,A?A.index:e.length);if(k+=v(D,u),!A)break;if(k%2)u.push(A[0]);else{var H=A[0],j=H.length;switch(H){case"ddd":case"dddd":var F=3===j?a.days.namesAbbr:a.days.names;u.push(F[t.getDay()]);break;case"d":case"dd":f=!0,u.push(n(r(t,2),j));break;case"MMM":case"MMMM":var q=r(t,1);u.push(a.monthsGenitive&&s()?a.monthsGenitive[3===j?"namesAbbr":"names"][q]:a.months[3===j?"namesAbbr":"names"][q]);break;case"M":case"MM":u.push(n(r(t,1)+1,j));break;case"y":case"yy":case"yyyy":q=g?g[0]:w(t,a,_(t,h),d),4>j&&(q%=100),u.push(n(q,j));break;case"h":case"hh":p=t.getHours()%12,0===p&&(p=12),u.push(n(p,j));break;case"H":case"HH":u.push(n(t.getHours(),j));break;case"m":case"mm":u.push(n(t.getMinutes(),j));break;case"s":case"ss":u.push(n(t.getSeconds(),j));break;case"t":case"tt":q=t.getHours()<12?a.AM?a.AM[0]:" ":a.PM?a.PM[0]:" ",u.push(1===j?q.charAt(0):q);break;case"f":case"ff":case"fff":u.push(n(t.getMilliseconds(),3).substr(0,j));break;case"z":case"zz":p=t.getTimezoneOffset()/60,u.push((0>=p?"+":"-")+n(Math.floor(Math.abs(p)),j));break;case"zzz":p=t.getTimezoneOffset()/60,u.push((0>=p?"+":"-")+n(Math.floor(Math.abs(p)),2)+":"+n(Math.abs(t.getTimezoneOffset()%60),2));break;case"g":case"gg":a.eras&&u.push(a.eras[_(t,h)].name);break;case"/":u.push(a["/"]);break;default:throw"Invalid date format pattern '"+H+"'."}}}return u.join("")},function(){var t;t=function(t,e,i){var n=i.groupSizes,s=n[0],r=1,a=Math.pow(10,e),o=Math.round(t*a)/a;isFinite(o)||(o=t),t=o;var u=t+"",l="",c=u.split(/e/i),h=c.length>1?parseInt(c[1],10):0;u=c[0],c=u.split("."),u=c[0],l=c.length>1?c[1]:"";h>0?(l=g(l,h,!1),u+=l.slice(0,h),l=l.substr(h)):0>h&&(h=-h,u=g(u,h+1),l=u.slice(-h,u.length)+l,u=u.slice(0,-h)),l=e>0?i["."]+(l.length>e?l.slice(0,e):g(l,e)):"";for(var d=u.length-1,p=i[","],f="";d>=0;){if(0===s||s>d)return u.slice(0,d+1)+(f.length?p+f+l:l);f=u.slice(d-s+1,d+1)+(f.length?p+f:""),d-=s,r<n.length&&(s=n[r],r++)}return u.slice(0,d+1)+p+f+l},x=function(e,i,n){if(!isFinite(e))return 1/0===e?n.numberFormat.positiveInfinity:e===-1/0?n.numberFormat.negativeInfinity:n.numberFormat.NaN;if(!i||"i"===i)return n.name.length?e.toLocaleString():e.toString();i=i||"D";var s,r=n.numberFormat,a=Math.abs(e),o=-1;i.length>1&&(o=parseInt(i.slice(1),10));var u,l=i.charAt(0).toUpperCase();switch(l){case"D":s="n",a=m(a),-1!==o&&(a=g(""+a,o,!0)),0>e&&(a="-"+a);break;case"N":u=r;case"C":u=u||r.currency;case"P":u=u||r.percent,s=0>e?u.pattern[0]:u.pattern[1]||"n",-1===o&&(o=u.decimals),a=t(a*("P"===l?100:1),o,u);break;default:throw"Bad number format specifier: "+l}for(var c=/n|\$|-|%/g,h="";;){var d=c.lastIndex,p=c.exec(s);if(h+=s.slice(d,p?p.index:s.length),!p)break;switch(p[0]){case"n":h+=a;break;case"$":h+=r.currency.symbol;break;case"-":/[1-9]/.test(a)&&(h+=r["-"]);break;case"%":h+=r.percent.symbol}}return h}}(),M=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},_=function(t,e){if(!e)return 0;for(var i,n=t.getTime(),s=0,r=e.length;r>s;s++)if(i=e[s].start,null===i||n>=i)return s;return 0},w=function(t,e,i,n){var s=t.getFullYear();return!n&&e.eras&&(s-=e.eras[i].offset),s},function(){var t,e,i,n,s,r,a;t=function(t,e){if(100>e){var i=new Date,n=_(i),s=w(i,t,n),r=t.twoDigitYearMax;r="string"==typeof r?(new Date).getFullYear()%100+parseInt(r,10):r,e+=s-s%100,e>r&&(e-=100)}return e},e=function(t,e,i){var n,s=t.days,u=t._upperDays;return u||(t._upperDays=u=[a(s.names),a(s.namesAbbr),a(s.namesShort)]),e=r(e),i?(n=o(u[1],e),-1===n&&(n=o(u[2],e))):n=o(u[0],e),n},i=function(t,e,i){var n=t.months,s=t.monthsGenitive||t.months,u=t._upperMonths,l=t._upperMonthsGen;u||(t._upperMonths=u=[a(n.names),a(n.namesAbbr)],t._upperMonthsGen=l=[a(s.names),a(s.namesAbbr)]),e=r(e);var c=o(i?u[1]:u[0],e);return 0>c&&(c=o(i?l[1]:l[0],e)),c},n=function(t,e){var i=t._parseRegExp;if(i){var n=i[e];if(n)return n}else t._parseRegExp=i={};for(var s,r=b(t,e).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),a=["^"],o=[],u=0,l=0,c=M();null!==(s=c.exec(r));){var h=r.slice(u,s.index);if(u=c.lastIndex,l+=v(h,a),l%2)a.push(s[0]);else{var d,p=s[0],f=p.length;switch(p){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":d="(\\D+)";break;case"tt":case"t":d="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":d="(\\d{"+f+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":d="(\\d\\d?)";break;case"zzz":d="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":d="([+-]?\\d\\d?)";break;case"/":d="(\\"+t["/"]+")";break;default:throw"Invalid date format pattern '"+p+"'."}d&&a.push(d),o.push(s[0])}}v(r.slice(u),a),a.push("$");var m=a.join("").replace(/\s+/g,"\\s+"),g={regExp:m,groups:o};return i[e]=g},s=function(t,e,i){return e>t||t>i},r=function(t){return t.split(" ").join(" ").toUpperCase()},a=function(t){for(var e=[],i=0,n=t.length;n>i;i++)e[i]=r(t[i]);return e},C=function(r,a,o){r=f(r);var u=o.calendar,l=n(u,a),c=new RegExp(l.regExp).exec(r);if(null===c)return null;for(var h,d=l.groups,m=null,g=null,v=null,b=null,y=null,x=0,M=0,_=0,w=0,C=null,k=!1,S=0,T=d.length;T>S;S++){var A=c[S+1];if(A){var D=d[S],H=D.length,j=parseInt(A,10);switch(D){case"dd":case"d":if(b=j,s(b,1,31))return null;break;case"MMM":case"MMMM":if(v=i(u,A,3===H),s(v,0,11))return null;break;case"M":case"MM":if(v=j-1,s(v,0,11))return null;break;case"y":case"yy":case"yyyy":if(g=4>H?t(u,j):j,s(g,0,9999))return null;break;case"h":case"hh":if(x=j,12===x&&(x=0),s(x,0,11))return null;break;case"H":case"HH":if(x=j,s(x,0,23))return null;break;case"m":case"mm":if(M=j,s(M,0,59))return null;break;case"s":case"ss":if(_=j,s(_,0,59))return null;break;case"tt":case"t":if(k=u.PM&&(A===u.PM[0]||A===u.PM[1]||A===u.PM[2]),!k&&(!u.AM||A!==u.AM[0]&&A!==u.AM[1]&&A!==u.AM[2]))return null;break;case"f":case"ff":case"fff":if(w=j*Math.pow(10,3-H),s(w,0,999))return null;break;case"ddd":case"dddd":if(y=e(u,A,3===H),s(y,0,6))return null;break;case"zzz":var F=A.split(/:/);if(2!==F.length)return null;if(h=parseInt(F[0],10),s(h,-12,13))return null;var q=parseInt(F[1],10);if(s(q,0,59))return null;C=60*h+(p(A,"-")?-q:q);break;case"z":case"zz":if(h=j,s(h,-12,13))return null;C=60*h;break;case"g":case"gg":var R=A;if(!R||!u.eras)return null;R=f(R.toLowerCase());for(var O=0,N=u.eras.length;N>O;O++)if(R===u.eras[O].name.toLowerCase()){m=O;break}if(null===m)return null}}}var I,E=new Date,B=u.convert;if(I=B?B.fromGregorian(E)[0]:E.getFullYear(),null===g?g=I:u.eras&&(g+=u.eras[m||0].offset),null===v&&(v=0),null===b&&(b=1),B){if(E=B.toGregorian(g,v,b),null===E)return null}else{if(E.setFullYear(g,v,b),E.getDate()!==b)return null;if(null!==y&&E.getDay()!==y)return null}if(k&&12>x&&(x+=12),E.setHours(x,M,_,w),null!==C){var z=E.getMinutes()-(C+E.getTimezoneOffset());E.setHours(E.getHours()+parseInt(z/60,10),z%60)}return E}}(),k=function(t,e,i){var n,s=e["-"],r=e["+"];switch(i){case"n -":s=" "+s,r=" "+r;case"n-":u(t,s)?n=["-",t.substr(0,t.length-s.length)]:u(t,r)&&(n=["+",t.substr(0,t.length-r.length)]);break;case"- n":s+=" ",r+=" ";case"-n":p(t,s)?n=["-",t.substr(s.length)]:p(t,r)&&(n=["+",t.substr(r.length)]);break;case"(n)":p(t,"(")&&u(t,")")&&(n=["-",t.substr(1,t.length-2)])}return n||["",t]},i.prototype.findClosestCulture=function(t){return i.findClosestCulture.call(this,t)},i.prototype.format=function(t,e,n){return i.format.call(this,t,e,n)},i.prototype.localize=function(t,e){return i.localize.call(this,t,e)},i.prototype.parseInt=function(t,e,n){return i.parseInt.call(this,t,e,n)},i.prototype.parseFloat=function(t,e,n){return i.parseFloat.call(this,t,e,n)},i.prototype.culture=function(t){return i.culture.call(this,t)},i.addCultureInfo=function(t,e,i){var n={},s=!1;"string"!=typeof t?(i=t,t=this.culture().name,n=this.cultures[t]):"string"!=typeof e?(i=e,s=null==this.cultures[t],n=this.cultures[t]||this.cultures["default"]):(s=!0,n=this.cultures[e]),this.cultures[t]=l(!0,{},n,i),s&&(this.cultures[t].calendar=this.cultures[t].calendars.standard)},i.findClosestCulture=function(t){var e;if(!t)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];if("string"==typeof t&&(t=t.split(",")),c(t)){var i,n,s=this.cultures,r=t,a=r.length,o=[];for(n=0;a>n;n++){t=f(r[n]);var u,l=t.split(";");i=f(l[0]),1===l.length?u=1:(t=f(l[1]),0===t.indexOf("q=")?(t=t.substr(2),u=parseFloat(t),u=isNaN(u)?0:u):u=1),o.push({lang:i,pri:u})}for(o.sort(function(t,e){return t.pri<e.pri?1:-1}),n=0;a>n;n++)if(i=o[n].lang,e=s[i])return e;for(n=0;a>n;n++)for(i=o[n].lang;;){var h=i.lastIndexOf("-");if(-1===h)break;if(i=i.substr(0,h),e=s[i])return e}for(n=0;a>n;n++){i=o[n].lang;for(var d in s){var p=s[d];if(p.language==i)return p}}}else if("object"==typeof t)return t;return e||null},i.format=function(t,e,i){return culture=this.findClosestCulture(i),t instanceof Date?t=y(t,e,culture):"number"==typeof t&&(t=x(t,e,culture)),t},i.localize=function(t,e){return this.findClosestCulture(e).messages[t]||this.cultures["default"].messages[t]},i.parseDate=function(t,e,i){i=this.findClosestCulture(i);var n,s,r;if(e){if("string"==typeof e&&(e=[e]),e.length)for(var a=0,o=e.length;o>a;a++){var u=e[a];if(u&&(n=C(t,u,i)))break}}else{r=i.calendar.patterns;for(s in r)if(n=C(t,r[s],i))break}return n||null},i.parseInt=function(t,e,n){return m(i.parseFloat(t,e,n))},i.parseFloat=function(t,e,i){"number"!=typeof e&&(i=e,e=10);var a=this.findClosestCulture(i),o=0/0,u=a.numberFormat;if(t.indexOf(a.numberFormat.currency.symbol)>-1&&(t=t.replace(a.numberFormat.currency.symbol,""),t=t.replace(a.numberFormat.currency["."],a.numberFormat["."])),t=f(t),s.test(t))o=parseFloat(t);else if(!e&&n.test(t))o=parseInt(t,16);else{var l=k(t,u,u.pattern[0]),c=l[0],h=l[1];""===c&&"(n)"!==u.pattern[0]&&(l=k(t,u,"(n)"),c=l[0],h=l[1]),""===c&&"-n"!==u.pattern[0]&&(l=k(t,u,"-n"),c=l[0],h=l[1]),c=c||"+";var d,p,m=h.indexOf("e");0>m&&(m=h.indexOf("E")),0>m?(p=h,d=null):(p=h.substr(0,m),d=h.substr(m+1));var g,v,b=u["."],y=p.indexOf(b);0>y?(g=p,v=null):(g=p.substr(0,y),v=p.substr(y+b.length));var x=u[","];g=g.split(x).join("");var M=x.replace(/\u00A0/g," ");x!==M&&(g=g.split(M).join(""));var _=c+g;if(null!==v&&(_+="."+v),null!==d){var w=k(d,u,"-n");_+="e"+(w[0]||"+")+w[1]}r.test(_)&&(o=parseFloat(_))}return o},i.culture=function(t){return"undefined"!=typeof t&&(this.cultureSelector=t),this.findClosestCulture(t)||this.culture["default"]}}(this),function(t){var e;e="undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?require("globalize"):t.Globalize,e.addCultureInfo("en-US","default",{name:"en-US",englishName:"English (United States)",calendars:{standard:{firstDay:1,patterns:{d:"MM/dd/yyyy",D:"MMMM dd yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, MMMM dd yyyy HH:mm",F:"dddd, MMMM dd yyyy HH:mm:ss",l:"ddd, MMM d",L:"dddd, MMMM d",c:"ddd M/d",C:"dddd M/d",M:"MMMM dd",Y:"MMMM yyyy"}}}}),e.addCultureInfo("en-GB","default",{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",numberFormat:{currency:{pattern:["-$n","$n"],symbol:"£"}},calendars:{standard:{firstDay:1,patterns:{d:"dd/MM/yyyy",D:"dd MMMM yyyy",t:"HH:mm",T:"HH:mm:ss",f:"dddd, dd MMMM yyyy HH:mm",F:"dddd, dd MMMM yyyy HH:mm:ss",l:"ddd, d MMM",L:"dddd, d MMMM",c:"ddd d/M",C:"dddd d/M",M:"dd MMMM",Y:"MMMM yyyy"}}}})}(this),function(t){var e;e="undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?require("globalize"):t.Globalize,e.perform_actions=function(){$(".globalize-short-date").each(function(){var t=e.format(new Date($(this).text()),"d",e.culture(karl_client_data.date_format));$(this).text(t)}),$(".globalize-long-date").each(function(){var t=e.format(new Date($(this).text()),"D",e.culture(karl_client_data.date_format));$(this).text(t)}),$(".globalize-full-date").each(function(){var t=e.format(new Date($(this).text()),"f",e.culture(karl_client_data.date_format));$(this).text(t)}),$(".globalize-calendar-abbr").each(function(){var t=e.format(new Date($(this).text()),"c",e.culture(karl_client_data.date_format));$(this).text(t)}),$(".globalize-calendar-full").each(function(){var t=e.format(new Date($(this).text()),"C",e.culture(karl_client_data.date_format));$(this).text(t)}),$(".globalize-calendar-list").each(function(){var t=e.format(new Date($(this).text()),"l",e.culture(karl_client_data.date_format));$(this).text(t)}),$(".globalize-calendar-long").each(function(){var t=e.format(new Date($(this).text()),"L",e.culture(karl_client_data.date_format));$(this).text(t)}),$(".globalize-sortable-date").each(function(){var t=e.format(new Date($(this).text()),"S",e.culture(karl_client_data.date_format));$(this).text(t)}),$(".globalize-date-time").each(function(){var t=e.format(new Date($(this).text()),"F",e.culture(karl_client_data.date_format));$(this).text(t)})}}(this),$(document).bind("ready",Globalize.perform_actions);