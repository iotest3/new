/*
 * KARL tinymce-popup-utils.min.js resources generated at 2014-10-10T14:55:04.251Z
*/
function MCTabs(){this.settings=[],this.onChange=tinyMCEPopup.editor.windowManager.createInstance("tinymce.util.Dispatcher")}function getColorPickerHTML(e,t){var n="",i=tinyMCEPopup.dom;return(label=i.select("label[for="+t+"]")[0])&&(label.id=label.id||i.uniqueId()),n+='<a role="button" aria-labelledby="'+e+'_label" id="'+e+'_link" href="javascript:;" onclick="tinyMCEPopup.pickColor(event,\''+t+'\');" onmousedown="return false;" class="pickcolor">',n+='<span id="'+e+'" title="'+tinyMCEPopup.getLang("browse")+'">&nbsp;<span id="'+e+'_label" class="mceVoiceLabel mceIconOnly" style="display:none;">'+tinyMCEPopup.getLang("browse")+"</span></span></a>"}function updateColor(e,t){document.getElementById(e).style.backgroundColor=document.forms[0].elements[t].value}function setBrowserDisabled(e,t){var n=document.getElementById(e),i=document.getElementById(e+"_link");i&&(t?(i.setAttribute("realhref",i.getAttribute("href")),i.removeAttribute("href"),tinyMCEPopup.dom.addClass(n,"disabled")):(i.getAttribute("realhref")&&i.setAttribute("href",i.getAttribute("realhref")),tinyMCEPopup.dom.removeClass(n,"disabled")))}function getBrowserHTML(e,t,n,i){var s,o,a=i+"_"+n+"_browser_callback";return(s=tinyMCEPopup.getParam(a,tinyMCEPopup.getParam("file_browser_callback")))?(o="",o+='<a id="'+e+'_link" href="javascript:openBrowser(\''+e+"','"+t+"', '"+n+"','"+a+'\');" onmousedown="return false;" class="browse">',o+='<span id="'+e+'" title="'+tinyMCEPopup.getLang("browse")+'">&nbsp;</span></a>'):""}function openBrowser(e,t,n,i){var s=document.getElementById(e);"mceButtonDisabled"!=s.className&&tinyMCEPopup.openBrowser(t,n,i)}function selectByValue(e,t,n,i,s){if(e&&e.elements[t]){n||(n="");for(var o=e.elements[t],a=!1,r=0;r<o.options.length;r++){var l=o.options[r];l.value==n||s&&l.value.toLowerCase()==n.toLowerCase()?(l.selected=!0,a=!0):l.selected=!1}if(!a&&i&&""!=n){var l=new Option(n,n);l.selected=!0,o.options[o.options.length]=l,o.selectedIndex=o.options.length-1}return a}}function getSelectValue(e,t){var n=e.elements[t];return null==n||null==n.options||-1===n.selectedIndex?"":n.options[n.selectedIndex].value}function addSelectValue(e,t,n,i){var s=e.elements[t],o=new Option(n,i);s.options[s.options.length]=o}function addClassesToList(e,t){var n=document.getElementById(e),i=tinyMCEPopup.getParam("theme_advanced_styles",!1);if(i=tinyMCEPopup.getParam(t,i)){for(var s=i.split(";"),o=0;o<s.length;o++)if(""!=s){var a,r;a=s[o].split("=")[0],r=s[o].split("=")[1],n.options[n.length]=new Option(a,r)}}else tinymce.each(tinyMCEPopup.editor.dom.getClasses(),function(e){n.options[n.length]=new Option(e.title||e["class"],e["class"])})}function isVisible(e){var t=document.getElementById(e);return t&&"none"!=t.style.display}function convertRGBToHex(e){var t=new RegExp("rgb\\s*\\(\\s*([0-9]+).*,\\s*([0-9]+).*,\\s*([0-9]+).*\\)","gi"),n=e.replace(t,"$1,$2,$3").split(",");return 3==n.length?(r=parseInt(n[0]).toString(16),g=parseInt(n[1]).toString(16),b=parseInt(n[2]).toString(16),r=1==r.length?"0"+r:r,g=1==g.length?"0"+g:g,b=1==b.length?"0"+b:b,"#"+r+g+b):e}function convertHexToRGB(e){return-1!=e.indexOf("#")?(e=e.replace(new RegExp("[^0-9A-F]","gi"),""),r=parseInt(e.substring(0,2),16),g=parseInt(e.substring(2,4),16),b=parseInt(e.substring(4,6),16),"rgb("+r+","+g+","+b+")"):e}function trimSize(e){return e.replace(/([0-9\.]+)(px|%|in|cm|mm|em|ex|pt|pc)/i,"$1$2")}function getCSSSize(e){if(e=trimSize(e),""==e)return"";if(/^[0-9]+$/.test(e))e+="px";else if(!/^[0-9\.]+(px|%|in|cm|mm|em|ex|pt|pc)$/i.test(e))return"";return e}function getStyle(e,t,n){var i=tinyMCEPopup.dom.getAttrib(e,t);return""!=i?""+i:("undefined"==typeof n&&(n=t),tinyMCEPopup.dom.getStyle(e,n))}var tinymce=null,tinyMCEPopup,tinyMCE;tinyMCEPopup={init:function(){var e,t=this;e=t.getWin(),tinymce=e.tinymce,tinyMCE=e.tinyMCE,t.editor=tinymce.EditorManager.activeEditor,t.params=t.editor.windowManager.params,t.features=t.editor.windowManager.features,t.dom=t.editor.windowManager.createInstance("tinymce.dom.DOMUtils",document,{ownEvents:!0,proxy:tinyMCEPopup._eventProxy}),t.dom.bind(window,"ready",t._onDOMLoaded,t),t.features.popup_css!==!1&&t.dom.loadCSS(t.features.popup_css||t.editor.settings.popup_css),t.listeners=[],t.onInit={add:function(e,n){t.listeners.push({func:e,scope:n})}},t.isWindow=!t.getWindowArg("mce_inline"),t.id=t.getWindowArg("mce_window_id"),t.editor.windowManager.onOpen.dispatch(t.editor.windowManager,window)},getWin:function(){return!window.frameElement&&window.dialogArguments||opener||parent||top},getWindowArg:function(e,t){var n=this.params[e];return tinymce.is(n)?n:t},getParam:function(e,t){return this.editor.getParam(e,t)},getLang:function(e,t){return this.editor.getLang(e,t)},execCommand:function(e,t,n,i){return i=i||{},i.skip_focus=1,this.restoreSelection(),this.editor.execCommand(e,t,n,i)},resizeToInnerSize:function(){var e=this;setTimeout(function(){var t=e.dom.getViewPort(window);e.editor.windowManager.resizeBy(e.getWindowArg("mce_width")-t.w,e.getWindowArg("mce_height")-t.h,e.id||window)},10)},executeOnLoad:function(s){this.onInit.add(function(){eval(s)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){var e=tinyMCEPopup;!e.isWindow&&tinymce.isIE&&e.editor.selection.moveToBookmark(e.editor.windowManager.bookmark)},requireLangPack:function(){var e=this,t=e.getWindowArg("plugin_url")||e.getWindowArg("theme_url");t&&e.editor.settings.language&&e.features.translate_i18n!==!1&&e.editor.settings.language_load!==!1&&(t+="/langs/"+e.editor.settings.language+"_dlg.js",tinymce.ScriptLoader.isDone(t)||(document.write('<script type="text/javascript" src="'+tinymce._addVer(t)+'"></script>'),tinymce.ScriptLoader.markDone(t)))},pickColor:function(e,t){this.execCommand("mceColorPicker",!0,{color:document.getElementById(t).value,func:function(e){document.getElementById(t).value=e;try{document.getElementById(t).onchange()}catch(n){}}})},openBrowser:function(e,t){tinyMCEPopup.restoreSelection(),this.editor.execCallback("file_browser_callback",e,document.getElementById(e).value,t,window)},confirm:function(e,t,n){this.editor.windowManager.confirm(e,t,n,window)},alert:function(e,t,n){this.editor.windowManager.alert(e,t,n,window)},close:function(){function e(){t.editor.windowManager.close(window),tinymce=tinyMCE=t.editor=t.params=t.dom=t.dom.doc=null}var t=this;tinymce.isOpera?t.getWin().setTimeout(e,0):e()},_restoreSelection:function(){var e=window.event.srcElement;"INPUT"!=e.nodeName||"submit"!=e.type&&"button"!=e.type||tinyMCEPopup.restoreSelection()},_onDOMLoaded:function(){var e,t,n=tinyMCEPopup,i=document.title;n.features.translate_i18n!==!1&&(e=document.body.innerHTML,tinymce.isIE&&(e=e.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')),document.dir=n.editor.getParam("directionality",""),(t=n.editor.translate(e))&&t!=e&&(document.body.innerHTML=t),(t=n.editor.translate(i))&&t!=i&&(document.title=i=t)),n.editor.getParam("browser_preferred_colors",!1)&&n.isWindow||n.dom.addClass(document.body,"forceColors"),document.body.style.display="",tinymce.isIE&&(document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection),n.dom.add(n.dom.select("head")[0],"base",{target:"_self"})),n.restoreSelection(),n.resizeToInnerSize(),n.isWindow?window.focus():n.editor.windowManager.setTitle(window,i),tinymce.isIE||n.isWindow||n.dom.bind(document,"focus",function(){n.editor.windowManager.focus(n.id)}),tinymce.each(n.dom.select("select"),function(e){e.onkeydown=tinyMCEPopup._accessHandler}),tinymce.each(n.listeners,function(e){e.func.call(e.scope,n.editor)}),n.getWindowArg("mce_auto_focus",!0)&&(window.focus(),tinymce.each(document.forms,function(e){tinymce.each(e.elements,function(e){return n.dom.hasClass(e,"mceFocus")&&!e.disabled?(e.focus(),!1):void 0})})),document.onkeyup=tinyMCEPopup._closeWinKeyHandler},_accessHandler:function(e){if(e=e||window.event,13==e.keyCode||32==e.keyCode){var t=e.target||e.srcElement;return t.onchange&&t.onchange(),tinymce.dom.Event.cancel(e)}},_closeWinKeyHandler:function(e){e=e||window.event,27==e.keyCode&&tinyMCEPopup.close()},_eventProxy:function(e){return function(t){tinyMCEPopup.dom.events.callNativeHandler(e,t)}}},tinyMCEPopup.init(),MCTabs.prototype.init=function(e){this.settings=e},MCTabs.prototype.getParam=function(e,t){var n=null;return n="undefined"==typeof this.settings[e]?t:this.settings[e],"true"==n||"false"==n?"true"==n:n},MCTabs.prototype.showTab=function(e){e.className="current",e.setAttribute("aria-selected",!0),e.setAttribute("aria-expanded",!0),e.tabIndex=0},MCTabs.prototype.hideTab=function(e){e.className="",e.setAttribute("aria-selected",!1),e.setAttribute("aria-expanded",!1),e.tabIndex=-1},MCTabs.prototype.showPanel=function(e){e.className="current",e.setAttribute("aria-hidden",!1)},MCTabs.prototype.hidePanel=function(e){e.className="panel",e.setAttribute("aria-hidden",!0)},MCTabs.prototype.getPanelForTab=function(e){return tinyMCEPopup.dom.getAttrib(e,"aria-controls")},MCTabs.prototype.displayTab=function(e,t,n){var i,s,o,a,r,l,c,d=this;if(o=document.getElementById(e),void 0===t&&(t=d.getPanelForTab(o)),i=document.getElementById(t),s=i?i.parentNode:null,a=o?o.parentNode:null,r=d.getParam("selection_class","current"),o&&a){for(l=a.childNodes,c=0;c<l.length;c++)"LI"==l[c].nodeName&&d.hideTab(l[c]);d.showTab(o)}if(i&&s){for(l=s.childNodes,c=0;c<l.length;c++)"DIV"==l[c].nodeName&&d.hidePanel(l[c]);n||o.focus(),d.showPanel(i)}},MCTabs.prototype.getAnchor=function(){var e,t=document.location.href;return-1!=(e=t.lastIndexOf("#"))?t.substring(e+1):""};var mcTabs=new MCTabs;tinyMCEPopup.onInit.add(function(){var e=tinyMCEPopup.getWin().tinymce,t=tinyMCEPopup.dom,n=e.each;n(t.select("div.tabs"),function(i){var s;t.setAttrib(i,"role","tablist");var o=tinyMCEPopup.dom.select("li",i),a=function(e){mcTabs.displayTab(e,mcTabs.getPanelForTab(e)),mcTabs.onChange.dispatch(e)};n(o,function(e){t.setAttrib(e,"role","tab"),t.bind(e,"click",function(){a(e.id)})}),t.bind(t.getRoot(),"keydown",function(t){9===t.keyCode&&t.ctrlKey&&!t.altKey&&(s.moveFocus(t.shiftKey?-1:1),e.dom.Event.cancel(t))}),n(t.select("a",i),function(e){t.setAttrib(e,"tabindex","-1")}),s=tinyMCEPopup.editor.windowManager.createInstance("tinymce.ui.KeyboardNavigation",{root:i,items:o,onAction:a,actOnFocus:!0,enableLeftRight:!0,enableUpDown:!0},tinyMCEPopup.dom)})});var Validator={isEmail:function(e){return this.test(e,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(e){return this.test(e,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(e){return this.test(e,"^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(e){return this.test(e,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(e){var t,n;if("SELECT"==e.nodeName&&e.selectedIndex<1)return!0;if("checkbox"==e.type&&!e.checked)return!0;if("radio"==e.type){for(n=0,t=e.form.elements;n<t.length;n++)if("radio"==t[n].type&&t[n].name==e.name&&t[n].checked)return!1;return!0}return new RegExp("^\\s*$").test(1==e.nodeType?e.value:e)},isNumber:function(e,t){return!(isNaN(1==e.nodeType?e.value:e)||t&&this.test(e,"^-?[0-9]*\\.[0-9]*$"))},test:function(e,t){return e=1==e.nodeType?e.value:e,""==e||new RegExp(t).test(e)}},AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(e){var t;for(t in e)this.settings[t]=e[t]},validate:function(e){var t,n,i=this.settings,s=0;for(n=this.tags(e,"label"),t=0;t<n.length;t++)this.removeClass(n[t],i.invalid_cls),n[t].setAttribute("aria-invalid",!1);return s+=this.validateElms(e,"input"),s+=this.validateElms(e,"select"),s+=this.validateElms(e,"textarea"),3==s},invalidate:function(e){this.mark(e.form,e)},getErrorMessages:function(e){var t,n,i,s,o=this.settings,a=[],r=tinyMCEPopup.editor;for(t=this.tags(e,"label"),n=0;n<t.length;n++)this.hasClass(t[n],o.invalid_cls)&&(i=document.getElementById(t[n].getAttribute("for")),s={field:t[n].textContent},this.hasClass(i,o.min_cls,!0)?(message=r.getLang("invalid_data_min"),s.min=this.getNum(i,o.min_cls)):message=r.getLang(this.hasClass(i,o.number_cls)?"invalid_data_number":this.hasClass(i,o.size_cls)?"invalid_data_size":"invalid_data"),message=message.replace(/{\#([^}]+)\}/g,function(e,t){return s[t]||"{#"+t+"}"}),a.push(message));return a},reset:function(e){var t,n,i,s=["label","input","select","textarea"],o=this.settings;if(null!=e)for(t=0;t<s.length;t++)for(i=this.tags(e.form?e.form:e,s[t]),n=0;n<i.length;n++)this.removeClass(i[n],o.invalid_cls),i[n].setAttribute("aria-invalid",!1)},validateElms:function(e,t){var n,i,s,o,a=this.settings,r=!0,l=Validator;for(n=this.tags(e,t),i=0;i<n.length;i++)s=n[i],this.removeClass(s,a.invalid_cls),this.hasClass(s,a.required_cls)&&l.isEmpty(s)&&(r=this.mark(e,s)),this.hasClass(s,a.number_cls)&&!l.isNumber(s)&&(r=this.mark(e,s)),this.hasClass(s,a.int_cls)&&!l.isNumber(s,!0)&&(r=this.mark(e,s)),this.hasClass(s,a.url_cls)&&!l.isAbsUrl(s)&&(r=this.mark(e,s)),this.hasClass(s,a.email_cls)&&!l.isEmail(s)&&(r=this.mark(e,s)),this.hasClass(s,a.size_cls)&&!l.isSize(s)&&(r=this.mark(e,s)),this.hasClass(s,a.id_cls)&&!l.isId(s)&&(r=this.mark(e,s)),this.hasClass(s,a.min_cls,!0)&&(o=this.getNum(s,a.min_cls),(isNaN(o)||parseInt(s.value)<parseInt(o))&&(r=this.mark(e,s))),this.hasClass(s,a.max_cls,!0)&&(o=this.getNum(s,a.max_cls),(isNaN(o)||parseInt(s.value)>parseInt(o))&&(r=this.mark(e,s)));return r},hasClass:function(e,t,n){return new RegExp("\\b"+t+(n?"[0-9]+":"")+"\\b","g").test(e.className)},getNum:function(e,t){return t=e.className.match(new RegExp("\\b"+t+"([0-9]+)\\b","g"))[0],t=t.replace(/[^0-9]/g,"")},addClass:function(e,t,n){var i=this.removeClass(e,t);e.className=n?t+(""!=i?" "+i:""):(""!=i?i+" ":"")+t},removeClass:function(e,t){return t=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," "),e.className=" "!=t?t:""},tags:function(e,t){return e.getElementsByTagName(t)},mark:function(e,t){var n=this.settings;return this.addClass(t,n.invalid_cls),t.setAttribute("aria-invalid","true"),this.markLabels(e,t,n.invalid_cls),!1},markLabels:function(e,t,n){var i,s;for(i=this.tags(e,"label"),s=0;s<i.length;s++)(i[s].getAttribute("for")==t.id||i[s].htmlFor==t.id)&&this.addClass(i[s],n);return null}},themeBaseURL=tinyMCEPopup.editor.baseURI.toAbsolute("themes/"+tinyMCEPopup.getParam("theme")),TinyMCE_EditableSelects={editSelectElm:null,init:function(){var e,t,n=document.getElementsByTagName("select");for(e=0;e<n.length;e++)-1!=n[e].className.indexOf("mceEditableSelect")&&(t=new Option(tinyMCEPopup.editor.translate("value"),"__mce_add_custom__"),t.className="mceAddSelectValue",n[e].options[n[e].options.length]=t,n[e].onchange=TinyMCE_EditableSelects.onChangeEditableSelect)},onChangeEditableSelect:function(e){var t,n=document,i=window.event?window.event.srcElement:e.target;"__mce_add_custom__"==i.options[i.selectedIndex].value&&(t=n.createElement("input"),t.id=i.id+"_custom",t.name=i.name+"_custom",t.type="text",t.style.width=i.offsetWidth+"px",i.parentNode.insertBefore(t,i),i.style.display="none",t.focus(),t.onblur=TinyMCE_EditableSelects.onBlurEditableSelectInput,t.onkeydown=TinyMCE_EditableSelects.onKeyDown,TinyMCE_EditableSelects.editSelectElm=i)},onBlurEditableSelectInput:function(){var e=TinyMCE_EditableSelects.editSelectElm;e&&(""!=e.previousSibling.value?(addSelectValue(document.forms[0],e.id,e.previousSibling.value,e.previousSibling.value),selectByValue(document.forms[0],e.id,e.previousSibling.value)):selectByValue(document.forms[0],e.id,""),e.style.display="inline",e.parentNode.removeChild(e.previousSibling),TinyMCE_EditableSelects.editSelectElm=null)},onKeyDown:function(e){e=e||window.event,13==e.keyCode&&TinyMCE_EditableSelects.onBlurEditableSelectInput()}};